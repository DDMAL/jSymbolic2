<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
	<title>Feature Explanations: Sequential</title>
</head>

<body text="#000000" bgcolor="#e4e4e4" link="#0033C4" vlink="#0033C4" alink="#0033C4">
<a name="Top"></a>

<table cellspacing="0" cellpadding="4" width="100%" bgcolor="#0033C4" border="0">
  <tbody><tr>
      <th align="left"><font face="Arial" color="#ffffff" size="+3">Feature Explanations: Sequential</font></th>
    </tr></tbody>
</table>

<p><strong>GENERAL NOTES</strong></p>

<p> The jSymbolic catalogue includes the following sequential features that are calculated using jSymbolic's intermediate <strong>n-grams</strong>, which provide an abstraction of the sequential aspects of a piece of music. Here, an n-gram is a sequence of musical moments that can be represented numerically. Aggregating n-grams allows us to observe patterns in the music and quantify how frequently different patterns occur. jSymbolic can generate n-grams of vertical intervals, melodic intervals, rhythmic values. N-grams are generated for values within a sliding window of size n over lists of these values in the order they occur in the piece. jSymbolic creates data structures ahead of time that contains these values for each MIDI track and channel that has at least one pitched note (Unpitched percussion on MIDI channel 10 is not analyzed for any type of n-gram).</p>
<p> jSymbolic's melodic <strong>note onset slices </strong> are used to calculate vertical intervals, melodic intervals, and rhythmic values. A new slice is created for all MIDI tracks and channels whenever a new note occurs in any voice, and each slice is populated with the melodic pitch, if any, found in its voice (as defined by MIDI track and channel). A series of melodic intervals can then be calculated for each voice by comparing the current melodic note in each slice with the last melodic note found in a prior slice for the given voice. Since, in MIDI, notes that are simultaneous in the musically abstract sense are not necessarily precisely similar in their MIDI encodings, notes that start very close together rhythmically are quantized rhythmically so that they are treated as if they are exactly simultaneous for the purpose of note onset slice calculations. As a result of using melodic note onset slices, jSymbolic's intermediate <strong>n-grams</strong> and the features dependent on them only analyze musical moments belonging to  the melodic line on each MIDI track and channel. Vertical interval n-grams are series of vertical intervals between the melodic notes on each track and channel. Melodic interval n-grams are sequences of intervals between the highest notes sounding within each track and channel. Rhythmic value n-grams are sequences of the rhythmic values of those notes.</p>
<p> Feature values are calculated using an aggregate of n-grams generated for each voice in the piece, except when noted (e.g. Between Highest and Lowest Line). The value of n of the n-grams can vary; the value that is currently used is three. This is because 3-grams are long enough to capture moments of interest like cadential suspensions, and are short enough that there are recurrences of many 3-grams, and their frequencies can be analyzed. This value varies across features as necessary. For example, a feature quantifying the amount of suspension in a piece may use vertical interval 4-grams because a suspended cadence will involve one more note onset (the resolution of the suspended note) and consequently one more set of vertical intervals in the sequence of vertical intervals of the 4-gram.</p>
<p><strong>JSYMBOLIC FEATURE CATALOGUE (SEQUENTIAL SECTION)</strong></p>
<p> The following features are based on vertical interval n-grams. A vertical interval n-gram is a sequence of lists of vertical intervals present at n sequential intervallic moments. Vertical intervals are calculated using jSymbolic's melodic note onset slices. At each note onset on any combination of MIDI track and channel, the vertical intervals between the highest pitched notes sounding on each combination are calculated, and for each combination of MIDI track and channel. Note that vertical intervals between lower pitched notes on each track and channel are excluded from any calculations. This is one way in which the following features differ from jSymbolic's Chords and Vertical Intervals features.</p>
<p> The result of this process is that jSymbolic can generate vertical interval n-grams for any subset of MIDI track and channel combinations in the piece. Because the number of vertical intervals at each intervallic moment is variable, and the dimension of jSymbolic's feature values must be discrete, the following features analyze vertical interval n-grams generated for the specified subset of MIDI tracks and channels, instead of vertical interval n-grams looking at all MIDI tracks and channels. For example, a subset "Highest and Lowest Line" contains the MIDI tracks and channels with the highest and lowest average pitches, respectively, and can analyze the relation between what is presumed to be the melody and the bassline in the piece. For  cadential or chordal analysis, a broader subset of voices can be used. Intervallic moments where there are no valid vertical intervals (i.e. one voice has a rest) are ignored unless otherwise noted.</p>
<ul>
  <li><font color="#FF0000"><strong>VI-1 Most Common Vertical Interval 3-gram - Between Highest and Lowest Line:</strong> A feature vector of the vertical interval 3-gram that occurs the most frequently in the piece, where the vertical intervals are between the melodic notes on the combination of MIDI track and channel with highest average pitch and that with the lowest average pitch. Each value of the feature vector is a vertical interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first vertical interval in the 3-gram). Each semitone value is with respect to the pitch in the lowest line. If there are no vertical intervals between the highest and the lowest line (i.e. the two are the same), then each value will be 128.0.</font></li>
  <li><font color="#FF0000"><strong>VI-2 Second Most Common Vertical Interval 3-gram - Between Highest and Lowest Line:</strong> A feature vector of the vertical interval 3-gram that occurs the second most frequently in the piece, where the vertical intervals are between the melodic notes on the combination of MIDI track and channel with highest average pitch and that with the lowest average pitch. Each value of the feature vector is a vertical interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first vertical interval in the 3-gram). Each semitone value is with respect to the pitch in the lowest line. If there are no vertical intervals between the highest and the lowest line (i.e. the two are the same), then each value will be 128.0.</font></li>
  <li><font color="#FF0000"><strong>VI-3 Number of Common Vertical Interval 3-grams - Between Highest and Lowest Line:</strong> The number of vertical interval 3-grams that each account individually for at least 9% of all vertical interval 3-grams. </font></li>
  <li><font color="#FF0000"><strong>VI-4 Number of Very Common Vertical Interval 3-grams - Between Highest and Lowest Line:</strong> The number of vertical interval 3-grams that each account individually for at least 20% of all vertical interval 3-grams. </font></li>
  <li><font color="#FF0000"><strong>VI-5 Prevalence of Most Common Vertical Interval 3-gram - Between Highest and Lowest Line:</strong> Fraction of all vertical interval 3-grams that corresponds to the most common vertical interval 3-gram.</font></li>
  <li><font color="#FF0000"><strong>VI-6 Prevalence of Second Most Common Vertical Interval 3-gram - Between Highest and Lowest Line:</strong> Fraction of all vertical interval 3-grams that corresponds to the second most common vertical interval 3-gram.</font></li>
</ul>
<p> The following features are based on melodic interval n-grams. Here, a melodic interval n-gram is a sequence of n melodic intervals on a single MIDI track and channel. As with jSymbolic's Melody and Melodic Interval features, melodic intervals are calculated using jSymbolic's melodic note onset slices, and the melodic interval is the interval between the highest pitched notes sounding at any time. Features analyze melodic interval n-grams aggregated for each combination of MIDI track and channel unless otherwise noted.</p>
<ul>
	<li><font color="#FF0000"><strong>MI-1 Most Common Melodic Interval 3-gram:</strong> The melodic interval 3-gram that occurs the most frequently in the piece. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-2 Second Most Common Melodic Interval 3-gram:</strong> The melodic interval 3-gram that occurs the second most frequently in the piece. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-3 Number of Common Melodic Interval 3-grams:</strong> The number of melodic interval 3-grams that each account individually for at least 9% of all melodic interval 3-grams.</font></li>
	<li><font color="#FF0000"><strong>MI-4 Number of Very Common Melodic Interval 3-grams:</strong> The number of melodic interval 3-grams that each account individually for at least 20% of all melodic interval 3-grams.</font></li>
	<li><font color="#FF0000"><strong>MI-5 Prevalence of Most Common Melodic Interval 3-gram:</strong> Fraction of melodic interval 3-grams that corresponds to the most common melodic interval 3-gram.</font></li>
	<li><font color="#FF0000"><strong>MI-6 Prevalence of Second Most Common Melodic Interval 3-gram:</strong> Fraction of melodic interval 3-grams that corresponds to the second most common melodic interval 3-gram.</font></li>
	<li><font color="#FF0000"><strong>MI-7 Most Common Melodic Interval 3-gram in Highest Line:</strong> The melodic interval 3-gram that occurs the most frequently on the MIDI track and channel with the highest average pitch. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-8 Second Most Common Melodic Interval 3-gram in Highest Line:</strong> The melodic interval 3-gram that occurs the second most frequently on the MIDI track and channel with the highest average pitch. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-9 Number of Common Melodic Interval 3-grams in Highest Line:</strong> The number of melodic interval 3-grams on the MIDI track and channel with the highest average pitch that each account individually for at least 9% of all melodic interval 3-grams on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-10 Number of Very Common Melodic Interval 3-grams in Highest Line:</strong> The number of melodic interval 3-grams on the MIDI track and channel with the highest average pitch that each account individually for at least 20% of all melodic interval 3-grams on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-11 Prevalence of Most Common Melodic Interval 3-gram in Highest Line:</strong> Fraction of melodic interval 3-grams on the MIDI track and channel with the highest average pitch that corresponds to the most common melodic interval 3-gram on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-12 Prevalence of Second Most Common Melodic Interval 3-gram in Highest Line:</strong> Fraction of melodic interval 3-grams on the MIDI track and channel with the highest average pitch that corresponds to the second most common melodic interval 3-gram on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-13 Most Common Melodic Interval 3-gram in Lowest Line:</strong> The melodic interval 3-gram that occurs the most frequently on the MIDI track and channel with the lowest average pitch. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-14 Second Most Common Melodic Interval 3-gram in Lowest Line:</strong> The melodic interval 3-gram that occurs the second most frequently on the MIDI track and channel with the lowest average pitch. Each value of the feature vector is a melodic interval in number of semitones, appearing in the order it occurs (e.g. the first value is the first melodic interval in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>MI-15 Number of Common Melodic Interval 3-grams in Lowest Line:</strong> The number of melodic interval 3-grams on the MIDI track and channel with the lowest average pitch that each account individually for at least 9% of all melodic interval 3-grams on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-16 Number of Very Common Melodic Interval 3-grams in Lowest Line:</strong> The number of melodic interval 3-grams on the MIDI track and channel with the lowest average pitch that each account individually for at least 20% of all melodic interval 3-grams on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-17 Prevalence of Most Common Melodic Interval 3-gram in Lowest Line:</strong> Fraction of melodic interval 3-grams on the MIDI track and channel with the lowest average pitch that corresponds to the most common melodic interval 3-gram on that track and channel.</font></li>
	<li><font color="#FF0000"><strong>MI-18 Prevalence of Second Most Common Melodic Interval 3-gram in Lowest Line:</strong> Fraction of melodic interval 3-grams on the MIDI track and channel with the lowest average pitch that corresponds to the second most common melodic interval 3-gram on that track and channel.</font></li>
</ul>
<p> The following features are based on rhythmic value n-grams. Here, a rhythmic value n-gram is a sequence of n rhythmic values of melodic notes on a single MIDI track and channel. Rhythmic values are calculated by finding the duration of each note in jSymbolic's melodic note onset slices for a particular combination of MIDI track and channel. They are quantized to the nearest duration in quarter notes (e.g. a value of 0.5 corresponds to the duration of an eighth note). The possible quantized values are 0.125, 0.25, 0.5, 0.75, 1.0, 2.0, 3.0, 4.0, 6.0, 8.0, 10.0, 12.0. Features analyze rhythmic value n-grams aggregated for each combination of MIDI track and channel unless otherwise noted.</p>
<ul>
	<li><font color="#FF0000"><strong>RV-1 Most Common Rhythmic Value 3-gram:</strong> The rhythmic value 3-gram that occurs the most frequently in the piece. Rhythmic values are quantized to the nearest duration in quarter notes, possible values being 0.125, 0.25, 0.5, 0.75, 1.0, 2.0, 3.0, 4.0, 6.0, 8.0, 10.0, and 12.0. Each value of the feature vector is a rhythmic value appearing in the order it occurs (e.g. the first value is the first rhythmic value in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>RV-2 Second Most Common Rhythmic Value 3-gram:</strong> The rhythmic value 3-gram that occurs the second most frequently in the piece. Rhythmic values are quantized to the nearest duration in quarter notes, possible values being 0.125, 0.25, 0.5, 0.75, 1.0, 2.0, 3.0, 4.0, 6.0, 8.0, 10.0, and 12.0. Each value of the feature vector is a rhythmic value appearing in the order it occurs (e.g. the first value is the first rhythmic value in the 3-gram).</font></li>
	<li><font color="#FF0000"><strong>RV-3 Number of Common Rhythmic Value 3-grams:</strong> The number of rhythmic value 3-grams that each account individually for at least 9% of all rhythmic value 3-grams.</font></li>
	<li><font color="#FF0000"><strong>RV-4 Number of Very Common Rhythmic Value 3-grams:</strong> The number of rhythmic value 3-grams that each account individually for at least 20% of all rhythmic value 3-grams.</font></li>
	<li><font color="#FF0000"><strong>RV-5 Prevalence of Most Common Rhythmic Value 3-gram:</strong> Fraction of rhythmic value 3-grams that corresponds to the most common rhythmic value 3-gram.</font></li>
	<li><font color="#FF0000"><strong>RV-6 Prevalence of Second Most Common Rhythmic Value 3-grams:</strong> Fraction of rhythmic value 3-grams that corresponds to the second most common rhythmic value 3-gram.</font></li>
</ul>

<p>
	To add to this page:
	- A 2-D n-gram explication when explanations for features using those n-grams are laid out.
	- A sentence mentioning the filtering out of infrequent n-grams (to be implemented).

	Potential cadential features:
	- A cadential histogram having bins corresponding to different types of cadences (imperfect, perfect, plagal, etc.). This, while not mutually exclusive with implementing features by type of cadence, may be preferable as a cadential histogram could become an intermediate representation and then obviate the need to create a vertical interval n-gram aggregate for each feature. Single features could analyze types of cadences that may coincide with each other - one could be excluded from the histogram.
	- Features by each type of cadence. This may be preferable to a cadential histogram as some cadences can belong to more than one type, and features for more types of cadences can be added as necessary.

	Drawbacks to potential cadential features:
	- Decorations around cadences introduce more note onset moments such that 3-grams do not capture that cadence. Features quantifying suspension can however provide a contrast to
	- There is missing pitch information from lower notes sounding on each MIDI track/channel. If chords (i.e. ii - V - I) are detected by groups of pitch classes, then jSymbolic does not recognize the chord sounding at that moment as the chord it is, and consequently the implicated cadence is not captured.

	Drawbacks to potential features quantifying isorhythm:
	- Isorhythm can be detected using 2-D rhythmic value and melodic interval n-grams, but this requires choosing a color and talea. The literature that I've read so far has suggested no common choice for either of these. On the contrary, one article noted that these often vary within the pieces that employ isorhythm (https://www.jstor.org/stable/854000?seq=1#metadata_info_tab_contents). It is of course too much work to calculate all such choices for a feature quanitfying generalized isorhythm; choosing a subset requires further reading to reach a non-arbitrary decision as to which colors/taleae are chosen for features.
</p>

<table height="5" width="100%" bgcolor="#0033C4" border="0"><tbody><tr><th></th></tr></tbody></table>
<p><tt><a href="../featureexplanations_files/featuressequential.html#Top">-top of page-</a></tt></p>

</body></html>