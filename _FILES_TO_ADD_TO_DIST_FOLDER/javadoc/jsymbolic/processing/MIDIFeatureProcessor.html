<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Thu Jun 30 15:47:34 EDT 2016 -->
<title>MIDIFeatureProcessor</title>
<meta name="date" content="2016-06-30">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MIDIFeatureProcessor";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jsymbolic2.processing</div>
<h2 title="Class MIDIFeatureProcessor" class="title">Class MIDIFeatureProcessor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>jsymbolic2.processing.MIDIFeatureProcessor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">MIDIFeatureProcessor</span>
extends java.lang.Object</pre>
<div class="block">This class is used to pre-process and extract features from MIDI recordings.
 An object of this class should be instantiated with parameters indicating
 the details of how features are to be extracted.

 <p>The extractFeatures method should be called whenever recordings are
 available to be analyzed. This method should be called once for each
 recording. It will write the extracted feature values to an XML file after
 each call. This will also save feature definitions to another XML file.

 <p>The finalize method should be called when all features have been
 extracted. This will finish writing the feature values to the XML file.

 <p>Features are extracted for each window and, when appropriate, the average
 and standard deviation of each of these features is extracted for each
 recording.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../jsymbolic/processing/MIDIFeatureProcessor.html#MIDIFeatureProcessor-double-double-jsymbolic.features.MIDIFeatureExtractor:A-boolean:A-boolean-boolean-java.lang.String-java.lang.String-">MIDIFeatureProcessor</a></span>(double&nbsp;window_size,
                    double&nbsp;window_overlap,
                    <a href="../../jsymbolic/features/MIDIFeatureExtractor.html" title="class in jsymbolic2.features">MIDIFeatureExtractor</a>[]&nbsp;all_feature_extractors,
                    boolean[]&nbsp;features_to_save_among_all,
                    boolean&nbsp;save_features_for_each_window,
                    boolean&nbsp;save_overall_recording_features,
                    java.lang.String&nbsp;feature_values_save_path,
                    java.lang.String&nbsp;feature_definitions_save_path)</code>
<div class="block">Validates and stores the configuration to use for extracting features
 from MIDI recordings.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../jsymbolic/api/jSymbolicData.html" title="class in jsymbolic2.api">jSymbolicData</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jsymbolic/processing/MIDIFeatureProcessor.html#extractAndReturnFeatures-java.io.File-java.util.List-">extractAndReturnFeatures</a></span>(java.io.File&nbsp;recording_file,
                        java.util.List&lt;java.lang.String&gt;&nbsp;errorLog)</code>
<div class="block">Extract and return all possible data and features the jSymbolic processes.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jsymbolic/processing/MIDIFeatureProcessor.html#extractFeatures-java.io.File-java.util.List-">extractFeatures</a></span>(java.io.File&nbsp;recording_file,
               java.util.List&lt;java.lang.String&gt;&nbsp;errorLog)</code>
<div class="block">Extract the features from the provided MIDI file.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jsymbolic/processing/MIDIFeatureProcessor.html#finalize--">finalize</a></span>()</code>
<div class="block">Write the ending tags to the feature_vector_file XML file.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double[][][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jsymbolic/processing/MIDIFeatureProcessor.html#getFeatures-javax.sound.midi.Sequence:A-org.ddmal.jmei2midi.meielements.meispecific.MeiSpecificStorage-">getFeatures</a></span>(javax.sound.midi.Sequence[]&nbsp;windows,
           org.ddmal.jmei2midi.meielements.meispecific.MeiSpecificStorage&nbsp;meiSpecificStorage)</code>
<div class="block">Exxtracts features from each window of the given MIDI sequences.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MIDIFeatureProcessor-double-double-jsymbolic.features.MIDIFeatureExtractor:A-boolean:A-boolean-boolean-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MIDIFeatureProcessor</h4>
<pre>public&nbsp;MIDIFeatureProcessor(double&nbsp;window_size,
                            double&nbsp;window_overlap,
                            <a href="../../jsymbolic/features/MIDIFeatureExtractor.html" title="class in jsymbolic2.features">MIDIFeatureExtractor</a>[]&nbsp;all_feature_extractors,
                            boolean[]&nbsp;features_to_save_among_all,
                            boolean&nbsp;save_features_for_each_window,
                            boolean&nbsp;save_overall_recording_features,
                            java.lang.String&nbsp;feature_values_save_path,
                            java.lang.String&nbsp;feature_definitions_save_path)
                     throws java.lang.Exception</pre>
<div class="block">Validates and stores the configuration to use for extracting features
 from MIDI recordings. Prepares the feature_vector_file and
 feature_key_file XML files for saving.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>window_size</code> - The size of the windows in
                                           seconds that the MIDI
                                           recordings are to be broken
                                           into.</dd>
<dd><code>window_overlap</code> - The fraction of overlap
                                           between adjacent windows. Must
                                           be between 0.0 and less than
                                           1.0, with a value of 0.0
                                           meaning no overlap.</dd>
<dd><code>all_feature_extractors</code> - All features that can be
                                           extracted.</dd>
<dd><code>features_to_save_among_all</code> - Which features are to be
                                           saved. Entries correspond to
                                           the all_feature_extractors
                                           parameter.</dd>
<dd><code>save_features_for_each_window</code> - Whether or not to save
                                           features individually for each
                                           window.</dd>
<dd><code>save_overall_recording_features</code> - Whetehr or not to save the
                                           average and standard deviation
                                           of each feature accross all
                                           windows.</dd>
<dd><code>feature_values_save_path</code> - The path of the
                                           feature_vector_file XML file
                                           to save feature values to.</dd>
<dd><code>feature_definitions_save_path</code> - The path of the
                                           feature_key_file file to save
                                           feature definitions to.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Throws an informative
                                           exception if the input
                                           parameters are invalid.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="extractAndReturnFeatures-java.io.File-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractAndReturnFeatures</h4>
<pre>public&nbsp;<a href="../../jsymbolic/api/jSymbolicData.html" title="class in jsymbolic2.api">jSymbolicData</a>&nbsp;extractAndReturnFeatures(java.io.File&nbsp;recording_file,
                                              java.util.List&lt;java.lang.String&gt;&nbsp;errorLog)
                                       throws javax.sound.midi.InvalidMidiDataException,
                                              ca.mcgill.music.ddmal.mei.MeiXmlReader.MeiXmlReadException,
                                              java.io.IOException,
                                              java.lang.Exception</pre>
<div class="block">Extract and return all possible data and features the jSymbolic processes.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recording_file</code> - The music file to extract features from.</dd>
<dd><code>errorLog</code> - A List(String) that holds all the files with errors.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An object that contains all the appropriate jSymbolicData.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.sound.midi.InvalidMidiDataException</code> - Thrown if the MIDI data is invalid.</dd>
<dd><code>java.io.IOException</code> - Thrown if there is a problem reading from the inputted file.</dd>
<dd><code>ca.mcgill.music.ddmal.mei.MeiXmlReader.MeiXmlReadException</code> - Thrown if there is a problem reading in the MEI XML from the inputted file.</dd>
<dd><code>java.lang.Exception</code> - When an unforeseen runtime exception occurs.</dd>
</dl>
</li>
</ul>
<a name="extractFeatures-java.io.File-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractFeatures</h4>
<pre>public&nbsp;void&nbsp;extractFeatures(java.io.File&nbsp;recording_file,
                            java.util.List&lt;java.lang.String&gt;&nbsp;errorLog)
                     throws javax.sound.midi.InvalidMidiDataException,
                            ca.mcgill.music.ddmal.mei.MeiXmlReader.MeiXmlReadException,
                            java.io.IOException,
                            java.lang.Exception</pre>
<div class="block">Extract the features from the provided MIDI file. This may involve
 windowing, depending on the instantiation parameters of this object. The
 feature values are automatically saved to the feature_vector_file XML
 file referred to by the values_writer field. The definitions of the
 features that are saved are also saved to the feature_key_file XML file
 referred to by the definitions_writer field.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recording_file</code> - The music file to extract features from.</dd>
<dd><code>errorLog</code> - A List(String) that holds all the files with errors.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.sound.midi.InvalidMidiDataException</code> - Thrown if the MIDI data is invalid.</dd>
<dd><code>java.io.IOException</code> - Thrown if there is a problem reading from the inputted file.</dd>
<dd><code>ca.mcgill.music.ddmal.mei.MeiXmlReader.MeiXmlReadException</code> - Thrown if there is a problem reading in the MEI XML from the inputted file.</dd>
<dd><code>java.lang.Exception</code> - When an unforeseen runtime exception occurs.</dd>
</dl>
</li>
</ul>
<a name="finalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>public&nbsp;void&nbsp;finalize()
              throws java.lang.Exception</pre>
<div class="block">Write the ending tags to the feature_vector_file XML file.
 Close the DataOutputStreams that were used to write it.

 <p>This method should be called when all features have been extracted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Throws an exception if cannot write or close the
                                                output streams.</dd>
</dl>
</li>
</ul>
<a name="getFeatures-javax.sound.midi.Sequence:A-org.ddmal.jmei2midi.meielements.meispecific.MeiSpecificStorage-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getFeatures</h4>
<pre>public&nbsp;double[][][]&nbsp;getFeatures(javax.sound.midi.Sequence[]&nbsp;windows,
                                org.ddmal.jmei2midi.meielements.meispecific.MeiSpecificStorage&nbsp;meiSpecificStorage)
                         throws java.lang.Exception</pre>
<div class="block">Exxtracts features from each window of the given MIDI sequences. If the
 passed windows paramter consists of only one window, then this could
 be a whole unwindowed MIDI file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>windows</code> - The ordered MIDI windows to extract features from.</dd>
<dd><code>meiSpecificStorage</code> - The mei specific data storage used to extract
                           mei specific features from the sequence windows.
                           This will be null if the file is not an mei file
                           and otherwise it will contain all mei specific data
                           extracted by jMei2Midi.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The extracted feature values for this recording.
                       The first indice identifies the window, the second
                       identifies the feature and the third identifies
                       the feature value. The third dimension will be
                       null if the given feature could not be extracted
                       for the given window.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Throws an exception if a problem occurs.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
